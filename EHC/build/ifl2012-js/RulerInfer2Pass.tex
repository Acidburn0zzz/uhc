%% ODER: format ==         = "\mathrel{==}"
%% ODER: format /=         = "\neq "
%
%
\makeatletter
\@ifundefined{lhs2tex.lhs2tex.sty.read}%
  {\@namedef{lhs2tex.lhs2tex.sty.read}{}%
   \newcommand\SkipToFmtEnd{}%
   \newcommand\EndFmtInput{}%
   \long\def\SkipToFmtEnd#1\EndFmtInput{}%
  }\SkipToFmtEnd

\newcommand\ReadOnlyOnce[1]{\@ifundefined{#1}{\@namedef{#1}{}}\SkipToFmtEnd}
\usepackage{amstext}
\usepackage{amssymb}
\usepackage{stmaryrd}
\DeclareFontFamily{OT1}{cmtex}{}
\DeclareFontShape{OT1}{cmtex}{m}{n}
  {<5><6><7><8>cmtex8
   <9>cmtex9
   <10><10.95><12><14.4><17.28><20.74><24.88>cmtex10}{}
\DeclareFontShape{OT1}{cmtex}{m}{it}
  {<-> ssub * cmtt/m/it}{}
\newcommand{\texfamily}{\fontfamily{cmtex}\selectfont}
\DeclareFontShape{OT1}{cmtt}{bx}{n}
  {<5><6><7><8>cmtt8
   <9>cmbtt9
   <10><10.95><12><14.4><17.28><20.74><24.88>cmbtt10}{}
\DeclareFontShape{OT1}{cmtex}{bx}{n}
  {<-> ssub * cmtt/bx/n}{}
\newcommand{\tex}[1]{\text{\texfamily#1}}	% NEU

\newcommand{\Sp}{\hskip.33334em\relax}


\newcommand{\Conid}[1]{\mathit{#1}}
\newcommand{\Varid}[1]{\mathit{#1}}
\newcommand{\anonymous}{\kern0.06em \vbox{\hrule\@width.5em}}
\newcommand{\plus}{\mathbin{+\!\!\!+}}
\newcommand{\bind}{\mathbin{>\!\!\!>\mkern-6.7mu=}}
\newcommand{\rbind}{\mathbin{=\mkern-6.7mu<\!\!\!<}}% suggested by Neil Mitchell
\newcommand{\sequ}{\mathbin{>\!\!\!>}}
\renewcommand{\leq}{\leqslant}
\renewcommand{\geq}{\geqslant}
\usepackage{polytable}

%mathindent has to be defined
\@ifundefined{mathindent}%
  {\newdimen\mathindent\mathindent\leftmargini}%
  {}%

\def\resethooks{%
  \global\let\SaveRestoreHook\empty
  \global\let\ColumnHook\empty}
\newcommand*{\savecolumns}[1][default]%
  {\g@addto@macro\SaveRestoreHook{\savecolumns[#1]}}
\newcommand*{\restorecolumns}[1][default]%
  {\g@addto@macro\SaveRestoreHook{\restorecolumns[#1]}}
\newcommand*{\aligncolumn}[2]%
  {\g@addto@macro\ColumnHook{\column{#1}{#2}}}

\resethooks

\newcommand{\onelinecommentchars}{\quad-{}- }
\newcommand{\commentbeginchars}{\enskip\{-}
\newcommand{\commentendchars}{-\}\enskip}

\newcommand{\visiblecomments}{%
  \let\onelinecomment=\onelinecommentchars
  \let\commentbegin=\commentbeginchars
  \let\commentend=\commentendchars}

\newcommand{\invisiblecomments}{%
  \let\onelinecomment=\empty
  \let\commentbegin=\empty
  \let\commentend=\empty}

\visiblecomments

\newlength{\blanklineskip}
\setlength{\blanklineskip}{0.66084ex}

\newcommand{\hsindent}[1]{\quad}% default is fixed indentation
\let\hspre\empty
\let\hspost\empty
\newcommand{\NB}{\textbf{NB}}
\newcommand{\Todo}[1]{$\langle$\textbf{To do:}~#1$\rangle$}

\EndFmtInput
\makeatother
%
%% configuration




%% end of configuration

%% CONFIG: Omitted material excluded


%% CONFIG: As article


% format * = "\times "
% subst inline a  	= "\ensuremath{{}\allowforspacecorrection " a "}"
% subst varid a  	= a "{}\allowforspacecorrection "









%% handling of `






% various keywords













% format CnstrVarpi	= Cnstr "^{" varpi "}"


















% format <=> 			= "\mathrel{\cong}"
% format <+-> 			= "\setbox0=\hbox{\ensuremath{\mathrel{\vartriangle}}}\copy0\kern-.4\wd0\mathrel{\triangledown}"
% format +	 			= ","
% format ++	 			= ","



% format fiopt			= "{\xi}"





% format ANY				= "\makebox[0cm][l]{\(\top\)}\bot{}"




% format ftv				= "\ftv "










%% acronyms




\rulerCmdDef{infer2pass.I2.fit.scheme}{%
\ensuremath{\ensuremath{o;\mathbb{C}\vdash } ^{ \ensuremath{\leq } } \ensuremath{\tau } _{ \ensuremath{\Varid{l}} } \ensuremath{\leq \tau } _{ \ensuremath{\Varid{r}} } \ensuremath{\mathbin{:}\tau } _{ \ensuremath{\Varid{f}} } \ensuremath{\leadsto \mathcal{C}} }
}
\rulerCmdDef{infer2pass.I2.fit.fit}{%
\rulerRule{fit}{I2}
{%
\ensuremath{\textit{fi}_{\leq }^{+},o;\mathbb{C}\vdash } ^{ \ensuremath{\cong } } \ensuremath{\mathbb{C}\;\sigma } _{ \ensuremath{\Varid{l}} } \ensuremath{\cong \mathbb{C}\;\sigma } _{ \ensuremath{\Varid{r}} } \ensuremath{\mathbin{:}\sigma } _{ \ensuremath{\Varid{f}} } \ensuremath{\leadsto \mathcal{C}} 
}
{%
\ensuremath{o;\mathbb{C}\vdash } ^{ \ensuremath{\leq } } \ensuremath{\sigma } _{ \ensuremath{\Varid{l}} } \ensuremath{\leq \sigma } _{ \ensuremath{\Varid{r}} } \ensuremath{\mathbin{:}\sigma } _{ \ensuremath{\Varid{f}} } \ensuremath{\leadsto \mathcal{C}} 
}
}

\rulerCmdDef{infer2pass.I2.fit}{%
\begin{rulerRulesetFigure}{\rulerCmdUse{infer2pass.I2.fit.scheme}}{Fitting of types}{infer2pass.I2.fit}{I2}
\rulerCmdUse{infer2pass.I2.fit.fit}
\end{rulerRulesetFigure}
}

\rulerCmdDef{infer2pass.I2.join.scheme}{%
\ensuremath{\ensuremath{o;\mathbb{C}\vdash } ^{ \ensuremath{\mathrel{\triangledown}} } \ensuremath{\tau } _{ \ensuremath{\Varid{l}} } \ensuremath{\mathrel{\triangledown}\tau } _{ \ensuremath{\Varid{r}} } \ensuremath{\mathbin{:}\tau } _{ \ensuremath{\Varid{f}} } \ensuremath{\leadsto \mathcal{C}} }
}
\rulerCmdDef{infer2pass.I2.join.join}{%
\rulerRule{join}{I2}
{%
\ensuremath{\textit{fi}_{\mathrel{\triangledown}}^{+},o;\mathbb{C}\vdash } ^{ \ensuremath{\cong } } \ensuremath{\mathbb{C}\;\sigma } _{ \ensuremath{\Varid{l}} } \ensuremath{\cong \mathbb{C}\;\sigma } _{ \ensuremath{\Varid{r}} } \ensuremath{\mathbin{:}\sigma } _{ \ensuremath{\Varid{f}} } \ensuremath{\leadsto \mathcal{C}} 
}
{%
\ensuremath{o;\mathbb{C}\vdash } ^{ \ensuremath{\mathrel{\triangledown}} } \ensuremath{\sigma } _{ \ensuremath{\Varid{l}} } \ensuremath{\mathrel{\triangledown}\sigma } _{ \ensuremath{\Varid{r}} } \ensuremath{\mathbin{:}\sigma } _{ \ensuremath{\Varid{f}} } \ensuremath{\leadsto \mathcal{C}} 
}
}

\rulerCmdDef{infer2pass.I2.join}{%
\begin{rulerRulesetFigure}{\rulerCmdUse{infer2pass.I2.join.scheme}}{Join of types}{infer2pass.I2.join}{I2}
\rulerCmdUse{infer2pass.I2.join.join}
\end{rulerRulesetFigure}
}

\rulerCmdDef{infer2pass.I2.meet.scheme}{%
\ensuremath{\ensuremath{o;\mathbb{C}\vdash } ^{ \ensuremath{\mathrel{\vartriangle}} } \ensuremath{\tau } _{ \ensuremath{\Varid{l}} } \ensuremath{\mathrel{\vartriangle}\tau } _{ \ensuremath{\Varid{r}} } \ensuremath{\mathbin{:}\tau } _{ \ensuremath{\Varid{f}} } \ensuremath{\leadsto \mathcal{C}} }
}
\rulerCmdDef{infer2pass.I2.meet.meet}{%
\rulerRule{meet}{I2}
{%
\ensuremath{\textit{fi}_{\mathrel{\vartriangle}}^{+},o;\mathbb{C}\vdash } ^{ \ensuremath{\cong } } \ensuremath{\mathbb{C}\;\sigma } _{ \ensuremath{\Varid{l}} } \ensuremath{\cong \mathbb{C}\;\sigma } _{ \ensuremath{\Varid{r}} } \ensuremath{\mathbin{:}\sigma } _{ \ensuremath{\Varid{f}} } \ensuremath{\leadsto \mathcal{C}} 
}
{%
\ensuremath{o;\mathbb{C}\vdash } ^{ \ensuremath{\mathrel{\vartriangle}} } \ensuremath{\sigma } _{ \ensuremath{\Varid{l}} } \ensuremath{\mathrel{\vartriangle}\sigma } _{ \ensuremath{\Varid{r}} } \ensuremath{\mathbin{:}\sigma } _{ \ensuremath{\Varid{f}} } \ensuremath{\leadsto \mathcal{C}} 
}
}

\rulerCmdDef{infer2pass.I2.meet}{%
\begin{rulerRulesetFigure}{\rulerCmdUse{infer2pass.I2.meet.scheme}}{Meet of types}{infer2pass.I2.meet}{I2}
\rulerCmdUse{infer2pass.I2.meet.meet}
\end{rulerRulesetFigure}
}

\rulerCmdDef{infer2pass.HM.prog.scheme}{%
\ensuremath{\ensuremath{\vdash } ^{ \ensuremath{\Varid{prog}} } \ensuremath{\Varid{prog}} }
}
\rulerCmdDef{infer2pass.HM.prog.p.prog}{%
\rulerRule{p.prog}{HM}
{%
\ensuremath{[\mskip1.5mu\allowforspacecorrection \mskip1.5mu];[\mskip1.5mu\allowforspacecorrection \mskip1.5mu]\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{e}\mathbin{:}\anonymous \leadsto \anonymous } 
}
{%
\ensuremath{\vdash } ^{ \ensuremath{\Varid{prog}} } \ensuremath{\Varid{e}} 
}
}

\rulerCmdDef{infer2pass.I1.prog.scheme}{%
\ensuremath{\ensuremath{\vdash } ^{ \ensuremath{\Varid{prog}} } \ensuremath{\Varid{prog}} }
}
\rulerCmdDef{infer2pass.I1.prog.p.prog}{%
\rulerRule{p.prog}{I1}
{%
\ensuremath{} \rulerChngBegMark{} \ensuremath{\Varid{v}} \rulerChngEndMark{} \ensuremath{} \;\mbox{fresh} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{[\mskip1.5mu\allowforspacecorrection \mskip1.5mu]} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{[\mskip1.5mu\allowforspacecorrection \mskip1.5mu]} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{[\mskip1.5mu\allowforspacecorrection \mskip1.5mu]} \rulerSameEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\Varid{v}} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{e}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerSameBegMark{} \ensuremath{\anonymous } \rulerSameEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\anonymous } \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\anonymous } \rulerSameEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{prog}} } \ensuremath{\Varid{e}} \rulerSameEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I2.prog.scheme}{%
\ensuremath{\ensuremath{\vdash } ^{ \ensuremath{\Varid{prog}} } \ensuremath{\Varid{prog}} }
}
\rulerCmdDef{infer2pass.I2.prog.p.prog}{%
\rulerRule{p.prog}{I2}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{v}} \;\mbox{fresh} \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerSameBegMark{} \ensuremath{[\mskip1.5mu\allowforspacecorrection \mskip1.5mu]} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{[\mskip1.5mu\allowforspacecorrection \mskip1.5mu]} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{[\mskip1.5mu\allowforspacecorrection \mskip1.5mu]} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Varid{v}} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{e}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\mathbb{\bbsigma}} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\anonymous } \rulerSameEndMark{} \ensuremath{\leadsto } \rulerSameBegMark{} \ensuremath{\anonymous } \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\anonymous } \rulerSameEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{prog}} } \ensuremath{\Varid{e}} \rulerSameEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.HM.prog}{%
\begin{rulerRulesetFigure}{\rulerCmdUse{infer2pass.HM.prog.scheme}}{Program}{infer2pass.HM.prog}{HM}
\rulerCmdUse{infer2pass.HM.prog.p.prog}
\end{rulerRulesetFigure}
}
\rulerCmdDef{infer2pass.I1.prog}{%
\begin{rulerRulesetFigure}{\rulerCmdUse{infer2pass.I1.prog.scheme}}{Program}{infer2pass.I1.prog}{I1}
\rulerCmdUse{infer2pass.I1.prog.p.prog}
\end{rulerRulesetFigure}
}
\rulerCmdDef{infer2pass.I2.prog}{%
\begin{rulerRulesetFigure}{\rulerCmdUse{infer2pass.I2.prog.scheme}}{Program}{infer2pass.I2.prog}{I2}
\rulerCmdUse{infer2pass.I2.prog.p.prog}
\end{rulerRulesetFigure}
}

\rulerCmdDef{infer2pass.HM.expr.base.scheme}{%
\ensuremath{\ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma \vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{e}\mathbin{:}\tau \leadsto \mathcal{C}} }
}
\rulerCmdDef{infer2pass.HM.expr.base.e.int}{%
\rulerRule{e.int}{HM}
{%
}
{%
\ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma \vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{int}\mathbin{:}\Conid{Int}\leadsto \mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.HM.expr.base.e.var}{%
\rulerRule{e.var}{HM}
{%
\ensuremath{\Varid{i}\mapsto \sigma \in \Gamma } 
\\
\ensuremath{\tau \mathrel{=}inst\;(\allowforspacecorrection \sigma )} 
}
{%
\ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma \vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{i}\mathbin{:}\tau \leadsto \mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.HM.expr.base.e.app}{%
\rulerRule{e.app}{HM}
{%
\ensuremath{\Varid{v}} \;\mbox{fresh} \ensuremath{} 
\\
\ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma \vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{f}\mathbin{:}\tau } _{ \ensuremath{\Varid{f}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{f}} } \ensuremath{} 
\\
\ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{f}} } \ensuremath{;\Gamma \vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{a}\mathbin{:}\tau } _{ \ensuremath{\Varid{a}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{} 
\\
\ensuremath{\vdash } ^{ \ensuremath{\cong } } \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{(\allowforspacecorrection \tau } _{ \ensuremath{\Varid{a}} } \ensuremath{\to \Varid{v})\cong \mathcal{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{\tau } _{ \ensuremath{\Varid{f}} } \ensuremath{\leadsto \mathcal{C}} 
}
{%
\ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma \vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{f}\;\Varid{a}\mathbin{:}\mathcal{C}\;\mathcal{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{\Varid{v}\leadsto \mathcal{C}\;\mathcal{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.HM.expr.base.e.lam}{%
\rulerRule{e.lam}{HM}
{%
\ensuremath{\Varid{v}} \;\mbox{fresh} \ensuremath{} 
\\
\ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;(\allowforspacecorrection \Varid{i}\mapsto \Varid{v}),\Gamma \vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{b}\mathbin{:}\tau } _{ \ensuremath{\Varid{b}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} 
}
{%
\ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma \vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\lambda \Varid{i}\to \Varid{b}\mathbin{:}\mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{\Varid{v}\to \tau } _{ \ensuremath{\Varid{b}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.HM.expr.base.e.let}{%
\rulerRule{e.let}{HM}
{%
\ensuremath{\Varid{v}} \;\mbox{fresh} \ensuremath{} 
\\
\ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;(\allowforspacecorrection \Varid{i}\mapsto \Varid{v}),\Gamma \vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{e}\mathbin{:}\tau } _{ \ensuremath{\Varid{e}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{} 
\\
\ensuremath{\vdash } ^{ \ensuremath{\cong } } \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{v}\cong \tau } _{ \ensuremath{\Varid{e}} } \ensuremath{\leadsto \mathcal{C}} 
\\
\ensuremath{\sigma } _{ \ensuremath{\Varid{e}} } \ensuremath{\mathrel{=}{\forall}\;(\allowforspacecorrection \Varid{ftv}\;(\allowforspacecorrection \tau } _{ \ensuremath{\Varid{e}} } \ensuremath{){\backslash}\Varid{ftv}\;(\allowforspacecorrection \mathcal{C}\;\mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{\Gamma )).\tau } _{ \ensuremath{\Varid{e}} } \ensuremath{} 
\\
\ensuremath{\mathcal{C}\;\mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{;(\allowforspacecorrection \Varid{i}\mapsto \sigma } _{ \ensuremath{\Varid{e}} } \ensuremath{),\Gamma \vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{b}\mathbin{:}\tau } _{ \ensuremath{\Varid{b}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} 
}
{%
\ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma \vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\mathbf{let}\;\Varid{i}\mathrel{=}\Varid{e}\;\mathbf{in}\;\Varid{b}\mathbin{:}\tau } _{ \ensuremath{\Varid{b}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I1.expr.base.scheme}{%
\ensuremath{\ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma ;\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{e}\mathbin{:}\tau \leadsto \mathbb{C};\mathcal{C}} }
}
\rulerCmdDef{infer2pass.I1.expr.base.e.int}{%
\rulerRule{e.int}{I1}
{%
\ensuremath{} \rulerChngBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\vdash } \rulerChngBegMark{} \ensuremath{\Conid{Int}} \rulerChngEndMark{} \ensuremath{\leq } \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathcal{C}} \rulerChngEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerChngBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{int}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerSameBegMark{} \ensuremath{\Conid{Int}} \rulerSameEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathcal{C}\;\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I1.expr.base.e.char}{%
\rulerRule{e.char}{I1}
{%
\ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash \Conid{Char}\leq \sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\leadsto \mathcal{C}} 
}
{%
\ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma ;\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{char}\mathbin{:}\Conid{Char}\leadsto \mathcal{C}\;\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I1.expr.base.e.var}{%
\rulerRule{e.var}{I1}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{i}\mapsto \sigma \in \Gamma } \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\vdash } \rulerChngBegMark{} \ensuremath{\sigma } \rulerChngEndMark{} \ensuremath{\leq } \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathcal{C}} \rulerChngEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerChngBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{i}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathcal{C}\;\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I1.expr.base.e.app}{%
\rulerRule{e.app}{I1}
{%
\ensuremath{} \rulerChngBegMark{} \ensuremath{\Varid{v}} \rulerChngEndMark{} \ensuremath{,} \rulerChngBegMark{} \ensuremath{\Varid{v}} _{ \ensuremath{\Varid{a}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{} \;\mbox{fresh} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\Varid{v}} _{ \ensuremath{\Varid{a}} } \ensuremath{\to \sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{f}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerSameBegMark{} \ensuremath{\tau } _{ \ensuremath{\Varid{f}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{f}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{f}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{f}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{f}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\Varid{v}} _{ \ensuremath{\Varid{a}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{a}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerSameBegMark{} \ensuremath{\tau } _{ \ensuremath{\Varid{a}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerChngBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{f}\;\Varid{a}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I1.expr.base.e.lam}{%
\rulerRule{e.lam}{I1}
{%
\ensuremath{} \rulerChngBegMark{} \ensuremath{\Varid{v}} \rulerChngEndMark{} \ensuremath{,} \rulerChngBegMark{} \ensuremath{\Varid{v}} _{ \ensuremath{\Varid{r}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{} \;\mbox{fresh} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\vdash } \rulerChngBegMark{} \ensuremath{\Varid{v}\to \Varid{v}} _{ \ensuremath{\Varid{r}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leq } \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathcal{C}} \rulerChngEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{\mathcal{C}\;\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{(\allowforspacecorrection \Varid{i}\mapsto \Varid{v}),\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\Varid{v}} _{ \ensuremath{\Varid{r}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{b}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerSameBegMark{} \ensuremath{\tau } _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerChngBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\lambda \Varid{i}\to \Varid{b}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I1.expr.base.e.let}{%
\rulerRule{e.let}{I1}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{v}} \;\mbox{fresh} \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{(\allowforspacecorrection \Varid{i}\mapsto \Varid{v}),\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\Varid{v}} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{e}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerSameBegMark{} \ensuremath{\tau } _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerSameBegMark{} \ensuremath{\sigma } _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\mathrel{=}{\forall}\;(\allowforspacecorrection \Varid{ftv}\;(\allowforspacecorrection } \rulerChngBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{v}} \rulerChngEndMark{} \ensuremath{){\backslash}\Varid{ftv}\;(\allowforspacecorrection } \rulerChngBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{\Gamma } \rulerChngEndMark{} \ensuremath{)).} \rulerChngBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{v}} \rulerChngEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{(\allowforspacecorrection \Varid{v}\mapsto \sigma } _{ \ensuremath{\Varid{e}} } \ensuremath{)\;\mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{(\allowforspacecorrection \Varid{i}\mapsto \Varid{v}),\Gamma } \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{b}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerSameBegMark{} \ensuremath{\tau } _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerChngBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\mathbf{let}\;\Varid{i}\mathrel{=}\Varid{e}\;\mathbf{in}\;\Varid{b}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I1.expr.base.e.tlet}{%
\rulerRule{e.tlet}{I1}
{%
\ensuremath{\Varid{v}} \;\mbox{fresh} \ensuremath{} 
\\
\ensuremath{[\mskip1.5mu\allowforspacecorrection \mskip1.5mu]\vdash } ^{ \ensuremath{\Varid{te}} } \ensuremath{\Varid{te}\mathbin{:}\sigma } 
\\
\ensuremath{(\allowforspacecorrection \Varid{v}\mapsto \sigma )\;\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;(\allowforspacecorrection \Varid{i}\mapsto \Varid{v}),\Gamma ;\sigma \vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{e}\mathbin{:}\tau } _{ \ensuremath{\Varid{e}} } \ensuremath{\leadsto \mathbb{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{;\mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{} 
\\
\ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{;\mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{;(\allowforspacecorrection \Varid{i}\mapsto \Varid{v}),\Gamma ;\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{b}\mathbin{:}\tau } _{ \ensuremath{\Varid{b}} } \ensuremath{\leadsto \mathbb{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{;\mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} 
}
{%
\ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma ;\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\mathbf{let}\;\Varid{i}\mathbin{::}\Varid{te}\mathrel{=}\Varid{e}\;\mathbf{in}\;\Varid{b}\mathbin{:}\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\leadsto \mathbb{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{;\mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I2.expr.base.scheme}{%
\ensuremath{\ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma ;\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{e}\mathbin{:}\mathbb{\bbsigma};\tau \leadsto \mathbb{C};\mathcal{C}} }
}
\rulerCmdDef{infer2pass.I2.expr.base.e.int}{%
\rulerRule{e.int}{I2}
{%
\ensuremath{} \rulerChngBegMark{} \ensuremath{o_{str}} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\leq } } \ensuremath{} \rulerChngBegMark{} \ensuremath{\Conid{Int}} \rulerChngEndMark{} \ensuremath{\leq } \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\anonymous } \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathcal{C}} \rulerChngEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{int}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\Conid{Int}} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Conid{Int}} \rulerSameEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\mathcal{C}\;\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I2.expr.base.e.char}{%
\rulerRule{e.char}{I2}
{%
\ensuremath{} \rulerChngBegMark{} \ensuremath{o_{str}} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\leq } } \ensuremath{} \rulerChngBegMark{} \ensuremath{\Conid{Char}} \rulerChngEndMark{} \ensuremath{\leq } \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\anonymous } \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathcal{C}} \rulerChngEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{char}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\Conid{Char}} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Conid{Char}} \rulerSameEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\mathcal{C}\;\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I2.expr.base.e.var}{%
\rulerRule{e.var}{I2}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{i}\mapsto \sigma \in \Gamma } \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{o_{str}} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\leq } } \ensuremath{} \rulerChngBegMark{} \ensuremath{\sigma } \rulerChngEndMark{} \ensuremath{\leq } \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\anonymous } \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathcal{C}} \rulerChngEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{i}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\sigma } \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\mathcal{C}\;\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I2.expr.base.e.app}{%
\rulerRule{e.app}{I2}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{v},\Varid{v}} _{ \ensuremath{\Varid{a}} } \ensuremath{} \;\mbox{fresh} \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Varid{v}} _{ \ensuremath{\Varid{a}} } \ensuremath{\to \sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{f}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\mathbb{\bbsigma}} _{ \ensuremath{\Varid{f}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\tau } _{ \ensuremath{\Varid{f}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\leadsto } \rulerSameBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{f}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{f}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{\textit{fi}_{alt}^{+},o_{str}} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{f}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\leq } } \ensuremath{} \rulerChngBegMark{} \ensuremath{\mathbb{\bbsigma}} _{ \ensuremath{\Varid{f}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leq } \rulerChngBegMark{} \ensuremath{\Varid{v}} _{ \ensuremath{\Varid{a}} } \ensuremath{\to \sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\anonymous } \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Conid{F}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Conid{F}} } \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{f}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{f}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Varid{v}} _{ \ensuremath{\Varid{a}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{a}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\mathbb{\bbsigma}} _{ \ensuremath{\Varid{a}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\tau } _{ \ensuremath{\Varid{a}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\leadsto } \rulerSameBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{\textit{fi}_{alt}^{+},o_{str}} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\leq } } \ensuremath{} \rulerChngBegMark{} \ensuremath{\mathbb{\bbsigma}} _{ \ensuremath{\Varid{a}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leq } \rulerChngBegMark{} \ensuremath{\Varid{v}} _{ \ensuremath{\Varid{a}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\anonymous } \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Conid{A}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{f}\;\Varid{a}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Conid{A}} } \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I2.expr.base.e.lam}{%
\rulerRule{e.lam}{I2}
{%
\ensuremath{} \rulerChngBegMark{} \ensuremath{} \overline{ \ensuremath{\Varid{v}} _{ \ensuremath{\Varid{g}} }} \ensuremath{} \rulerChngEndMark{} \ensuremath{\mathrel{=}\Varid{ftv}\;(\allowforspacecorrection } \rulerChngBegMark{} \ensuremath{\Gamma } \rulerChngEndMark{} \ensuremath{)} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{o_{meet}} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{} \overline{ \ensuremath{\Varid{v}} _{ \ensuremath{\Varid{g}} }} \ensuremath{} \rulerChngEndMark{} \ensuremath{} \stackrel{ \ensuremath{\varphi \;\Varid{elim}} }{ \ensuremath{\vdash } } \ensuremath{} \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\sigma } _{ \ensuremath{\Varid{e}} }^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\anonymous } \rulerChngEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{v},\Varid{v}} _{ \ensuremath{\Varid{r}} } \ensuremath{} \;\mbox{fresh} \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{o_{str}} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\leq } } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{v}\to \Varid{v}} _{ \ensuremath{\Varid{r}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\leq } \rulerChngBegMark{} \ensuremath{\sigma } _{ \ensuremath{\Varid{e}} }^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\sigma } _{ \ensuremath{\Conid{F}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Conid{F}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Conid{F}} } \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{f}} } \ensuremath{\mathbb{C}} _{ \ensuremath{\Conid{A}} } \ensuremath{(\allowforspacecorrection \mathbb{C}} _{ \ensuremath{\Conid{F}} } \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{)\;\mathbb{C}} _{ \ensuremath{\Conid{F}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{(\allowforspacecorrection \Varid{i}\mapsto \Varid{v}),\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Varid{v}} _{ \ensuremath{\Varid{r}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{b}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\mathbb{\bbsigma}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\tau } _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\leadsto } \rulerSameBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{\textit{fi}_{l,r}^{-},o_{str}} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Conid{A}} } \ensuremath{(\allowforspacecorrection \mathbb{C}} _{ \ensuremath{\Conid{F}} } \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{)\;\mathbb{C}} _{ \ensuremath{\Conid{F}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\leq } } \ensuremath{} \rulerChngBegMark{} \ensuremath{\Varid{v}\to \Varid{v}} _{ \ensuremath{\Varid{r}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leq } \rulerChngBegMark{} \ensuremath{\sigma } _{ \ensuremath{\Conid{F}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\anonymous } \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{f}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{o_{meet}} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{} \overline{ \ensuremath{\Varid{v}} _{ \ensuremath{\Varid{g}} }} \ensuremath{} \rulerChngEndMark{} \ensuremath{} \stackrel{ \ensuremath{\varphi \;\Varid{elim}} }{ \ensuremath{\vdash } } \ensuremath{} \rulerChngBegMark{} \ensuremath{\Varid{v}} \rulerChngEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\anonymous } \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Conid{A}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\lambda \Varid{i}\to \Varid{b}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\Varid{v}\to \mathbb{\bbsigma}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Conid{A}} } \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I2.expr.base.e.let}{%
\rulerRule{e.let}{I2}
{%
\ensuremath{} \rulerChngBegMark{} \ensuremath{} \overline{ \ensuremath{\Varid{v}} _{ \ensuremath{\Varid{g}} }} \ensuremath{} \rulerChngEndMark{} \ensuremath{\mathrel{=}\Varid{ftv}\;(\allowforspacecorrection } \rulerChngBegMark{} \ensuremath{\Gamma } \rulerChngEndMark{} \ensuremath{)} 
\\
\ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{v}} \;\mbox{fresh} \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Conid{E}} } \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{(\allowforspacecorrection \Varid{i}\mapsto \Varid{v}),\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Varid{v}} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{e}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\mathbb{\bbsigma}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\tau } _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\leadsto } \rulerSameBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{o_{join}} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{} \overline{ \ensuremath{\Varid{v}} _{ \ensuremath{\Varid{g}} }} \ensuremath{} \rulerChngEndMark{} \ensuremath{} \stackrel{ \ensuremath{\varphi \;\Varid{elim}} }{ \ensuremath{\vdash } } \ensuremath{} \rulerChngBegMark{} \ensuremath{\mathbb{\bbsigma}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\anonymous } \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Conid{E}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerSameBegMark{} \ensuremath{\sigma } _{ \ensuremath{\Varid{e}} } \ensuremath{\mathrel{=}{\forall}\;(\allowforspacecorrection \Varid{ftv}\;(\allowforspacecorrection \mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{v}){\backslash}\Varid{ftv}\;(\allowforspacecorrection \mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{\Gamma )).\mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{v}} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Conid{E}} } \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{(\allowforspacecorrection \Varid{v}\mapsto \sigma } _{ \ensuremath{\Varid{e}} } \ensuremath{)\;\mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{(\allowforspacecorrection \Varid{i}\mapsto \Varid{v}),\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{b}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\mathbb{\bbsigma}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\tau } _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\leadsto } \rulerSameBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\mathbf{let}\;\Varid{i}\mathrel{=}\Varid{e}\;\mathbf{in}\;\Varid{b}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\mathbb{\bbsigma}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\leadsto } \rulerSameBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I2.expr.base.e.tlet}{%
\rulerRule{e.tlet}{I2}
{%
\ensuremath{} \rulerChngBegMark{} \ensuremath{} \overline{ \ensuremath{\Varid{v}} _{ \ensuremath{\Varid{g}} }} \ensuremath{} \rulerChngEndMark{} \ensuremath{\mathrel{=}\Varid{ftv}\;(\allowforspacecorrection } \rulerChngBegMark{} \ensuremath{\Gamma } \rulerChngEndMark{} \ensuremath{)} 
\\
\ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{v}} \;\mbox{fresh} \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerSameBegMark{} \ensuremath{[\mskip1.5mu\allowforspacecorrection \mskip1.5mu]\vdash } ^{ \ensuremath{\Varid{te}} } \ensuremath{\Varid{te}\mathbin{:}\sigma } \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerSameBegMark{} \ensuremath{(\allowforspacecorrection \Varid{v}\mapsto \sigma )\;\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{(\allowforspacecorrection \Varid{v}\mapsto \sigma )\;\mathbb{C}} _{ \ensuremath{\Conid{E}} } \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{(\allowforspacecorrection \Varid{i}\mapsto \Varid{v}),\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\sigma } \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{e}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\mathbb{\bbsigma}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\tau } _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\leadsto } \rulerSameBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{o_{join}} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{} \overline{ \ensuremath{\Varid{v}} _{ \ensuremath{\Varid{g}} }} \ensuremath{} \rulerChngEndMark{} \ensuremath{} \stackrel{ \ensuremath{\varphi \;\Varid{elim}} }{ \ensuremath{\vdash } } \ensuremath{} \rulerChngBegMark{} \ensuremath{\mathbb{\bbsigma}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\anonymous } \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Conid{E}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Conid{E}} } \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{(\allowforspacecorrection \Varid{i}\mapsto \Varid{v}),\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{b}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\mathbb{\bbsigma}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\tau } _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\leadsto } \rulerSameBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\mathbf{let}\;\Varid{i}\mathbin{::}\Varid{te}\mathrel{=}\Varid{e}\;\mathbf{in}\;\Varid{b}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\mathbb{\bbsigma}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\leadsto } \rulerSameBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.HM.expr.base}{%
\begin{rulerRulesetFigure}{\rulerCmdUse{infer2pass.HM.expr.base.scheme}}{Expression type rules}{infer2pass.HM.expr.base}{HM}
\rulerCmdUse{infer2pass.HM.expr.base.e.int}
\hspace{1ex}
\rulerCmdUse{infer2pass.HM.expr.base.e.var}
\hspace{1ex}
\rulerCmdUse{infer2pass.HM.expr.base.e.app}
\hspace{1ex}
\rulerCmdUse{infer2pass.HM.expr.base.e.lam}
\hspace{1ex}
\rulerCmdUse{infer2pass.HM.expr.base.e.let}
\end{rulerRulesetFigure}
}
\rulerCmdDef{infer2pass.I1.expr.base}{%
\begin{rulerRulesetFigure}{\rulerCmdUse{infer2pass.I1.expr.base.scheme}}{Expression type rules}{infer2pass.I1.expr.base}{I1}
\rulerCmdUse{infer2pass.I1.expr.base.e.int}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.expr.base.e.char}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.expr.base.e.var}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.expr.base.e.app}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.expr.base.e.lam}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.expr.base.e.let}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.expr.base.e.tlet}
\end{rulerRulesetFigure}
}
\rulerCmdDef{infer2pass.I2.expr.base}{%
\begin{rulerRulesetFigure}{\rulerCmdUse{infer2pass.I2.expr.base.scheme}}{Expression type rules}{infer2pass.I2.expr.base}{I2}
\rulerCmdUse{infer2pass.I2.expr.base.e.int}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.expr.base.e.char}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.expr.base.e.var}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.expr.base.e.app}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.expr.base.e.lam}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.expr.base.e.let}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.expr.base.e.tlet}
\end{rulerRulesetFigure}
}

\rulerCmdDef{infer2pass.HM.expr.hm.scheme}{%
\ensuremath{\ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma \vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{e}\mathbin{:}\tau \leadsto \mathcal{C}} }
}
\rulerCmdDef{infer2pass.HM.expr.hm.e.int}{%
\rulerRule{e.int}{HM}
{%
}
{%
\ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma \vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{int}\mathbin{:}\Conid{Int}\leadsto \mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.HM.expr.hm.e.var}{%
\rulerRule{e.var}{HM}
{%
\ensuremath{\Varid{i}\mapsto \sigma \in \Gamma } 
\\
\ensuremath{\tau \mathrel{=}inst\;(\allowforspacecorrection \sigma )} 
}
{%
\ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma \vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{i}\mathbin{:}\tau \leadsto \mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.HM.expr.hm.e.app}{%
\rulerRule{e.app}{HM}
{%
\ensuremath{\Varid{v}} \;\mbox{fresh} \ensuremath{} 
\\
\ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma \vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{f}\mathbin{:}\tau } _{ \ensuremath{\Varid{f}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{f}} } \ensuremath{} 
\\
\ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{f}} } \ensuremath{;\Gamma \vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{a}\mathbin{:}\tau } _{ \ensuremath{\Varid{a}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{} 
\\
\ensuremath{\vdash } ^{ \ensuremath{\cong } } \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{(\allowforspacecorrection \tau } _{ \ensuremath{\Varid{a}} } \ensuremath{\to \Varid{v})\cong \mathcal{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{\tau } _{ \ensuremath{\Varid{f}} } \ensuremath{\leadsto \mathcal{C}} 
}
{%
\ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma \vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{f}\;\Varid{a}\mathbin{:}\mathcal{C}\;\mathcal{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{\Varid{v}\leadsto \mathcal{C}\;\mathcal{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.HM.expr.hm.e.lam}{%
\rulerRule{e.lam}{HM}
{%
\ensuremath{\Varid{v}} \;\mbox{fresh} \ensuremath{} 
\\
\ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;(\allowforspacecorrection \Varid{i}\mapsto \Varid{v}),\Gamma \vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{b}\mathbin{:}\tau } _{ \ensuremath{\Varid{b}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} 
}
{%
\ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma \vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\lambda \Varid{i}\to \Varid{b}\mathbin{:}\mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{\Varid{v}\to \tau } _{ \ensuremath{\Varid{b}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.HM.expr.hm.e.let}{%
\rulerRule{e.let}{HM}
{%
\ensuremath{\Varid{v}} \;\mbox{fresh} \ensuremath{} 
\\
\ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;(\allowforspacecorrection \Varid{i}\mapsto \Varid{v}),\Gamma \vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{e}\mathbin{:}\tau } _{ \ensuremath{\Varid{e}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{} 
\\
\ensuremath{\vdash } ^{ \ensuremath{\cong } } \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{v}\cong \tau } _{ \ensuremath{\Varid{e}} } \ensuremath{\leadsto \mathcal{C}} 
\\
\ensuremath{\sigma } _{ \ensuremath{\Varid{e}} } \ensuremath{\mathrel{=}{\forall}\;(\allowforspacecorrection \Varid{ftv}\;(\allowforspacecorrection \tau } _{ \ensuremath{\Varid{e}} } \ensuremath{){\backslash}\Varid{ftv}\;(\allowforspacecorrection \mathcal{C}\;\mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{\Gamma )).\tau } _{ \ensuremath{\Varid{e}} } \ensuremath{} 
\\
\ensuremath{\mathcal{C}\;\mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{;(\allowforspacecorrection \Varid{i}\mapsto \sigma } _{ \ensuremath{\Varid{e}} } \ensuremath{),\Gamma \vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{b}\mathbin{:}\tau } _{ \ensuremath{\Varid{b}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} 
}
{%
\ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma \vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\mathbf{let}\;\Varid{i}\mathrel{=}\Varid{e}\;\mathbf{in}\;\Varid{b}\mathbin{:}\tau } _{ \ensuremath{\Varid{b}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I1.expr.hm.scheme}{%
\ensuremath{\ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma ;\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{e}\mathbin{:}\tau \leadsto \mathcal{C}} }
}
\rulerCmdDef{infer2pass.I1.expr.hm.e.int}{%
\rulerRule{e.int}{I1}
{%
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{int}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerSameBegMark{} \ensuremath{\Conid{Int}} \rulerSameEndMark{} \ensuremath{\leadsto } \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I1.expr.hm.e.char}{%
\rulerRule{e.char}{I1}
{%
}
{%
\ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma ;\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{char}\mathbin{:}\Conid{Char}\leadsto \mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I1.expr.hm.e.var}{%
\rulerRule{e.var}{I1}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{i}\mapsto \sigma \in \Gamma } \rulerSameEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{i}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leadsto } \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I1.expr.hm.e.app}{%
\rulerRule{e.app}{I1}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{v}} \;\mbox{fresh} \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{{\cdot}} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{f}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerSameBegMark{} \ensuremath{\tau } _{ \ensuremath{\Varid{f}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\leadsto } \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{f}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{f}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{{\cdot}} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{a}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerSameBegMark{} \ensuremath{\tau } _{ \ensuremath{\Varid{a}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\leadsto } \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{f}\;\Varid{a}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I1.expr.hm.e.lam}{%
\rulerRule{e.lam}{I1}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{v}} \;\mbox{fresh} \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{(\allowforspacecorrection \Varid{i}\mapsto \Varid{v}),\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{{\cdot}} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{b}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerSameBegMark{} \ensuremath{\tau } _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\leadsto } \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\lambda \Varid{i}\to \Varid{b}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leadsto } \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I1.expr.hm.e.let}{%
\rulerRule{e.let}{I1}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{v}} \;\mbox{fresh} \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{(\allowforspacecorrection \Varid{i}\mapsto \Varid{v}),\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{{\cdot}} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{e}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerSameBegMark{} \ensuremath{\tau } _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\leadsto } \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerSameBegMark{} \ensuremath{\sigma } _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\mathrel{=}{\forall}\;(\allowforspacecorrection \Varid{ftv}\;(\allowforspacecorrection } \rulerChngBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{v}} \rulerChngEndMark{} \ensuremath{){\backslash}\Varid{ftv}\;(\allowforspacecorrection } \rulerChngBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{\Gamma } \rulerChngEndMark{} \ensuremath{)).} \rulerChngBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{v}} \rulerChngEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{(\allowforspacecorrection \Varid{v}\mapsto \sigma } _{ \ensuremath{\Varid{e}} } \ensuremath{)\;\mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{(\allowforspacecorrection \Varid{i}\mapsto \Varid{v}),\Gamma } \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{{\cdot}} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{b}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerSameBegMark{} \ensuremath{\tau } _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\leadsto } \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\mathbf{let}\;\Varid{i}\mathrel{=}\Varid{e}\;\mathbf{in}\;\Varid{b}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leadsto } \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I1.expr.hm.e.tlet}{%
\rulerRule{e.tlet}{I1}
{%
\ensuremath{\Varid{v}} \;\mbox{fresh} \ensuremath{} 
\\
\ensuremath{[\mskip1.5mu\allowforspacecorrection \mskip1.5mu]\vdash } ^{ \ensuremath{\Varid{te}} } \ensuremath{\Varid{te}\mathbin{:}\sigma } 
\\
\ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;(\allowforspacecorrection \Varid{i}\mapsto \Varid{v}),\Gamma ;{\cdot}\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{e}\mathbin{:}\tau } _{ \ensuremath{\Varid{e}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{} 
\\
\ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{;(\allowforspacecorrection \Varid{i}\mapsto \Varid{v}),\Gamma ;{\cdot}\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{b}\mathbin{:}\tau } _{ \ensuremath{\Varid{b}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} 
}
{%
\ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma ;\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\mathbf{let}\;\Varid{i}\mathbin{::}\Varid{te}\mathrel{=}\Varid{e}\;\mathbf{in}\;\Varid{b}\mathbin{:}\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I2.expr.hm.scheme}{%
\ensuremath{\ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma ;\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{e}\mathbin{:}\tau \leadsto \mathcal{C}} }
}
\rulerCmdDef{infer2pass.I2.expr.hm.e.int}{%
\rulerRule{e.int}{I2}
{%
\ensuremath{} \rulerChngBegMark{} \ensuremath{o_{str}} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\leq } } \ensuremath{} \rulerChngBegMark{} \ensuremath{\Conid{Int}} \rulerChngEndMark{} \ensuremath{\leq } \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\anonymous } \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathcal{C}} \rulerChngEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{int}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerSameBegMark{} \ensuremath{\Conid{Int}} \rulerSameEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathcal{C}\;\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I2.expr.hm.e.char}{%
\rulerRule{e.char}{I2}
{%
\ensuremath{} \rulerChngBegMark{} \ensuremath{o_{str}} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\leq } } \ensuremath{} \rulerChngBegMark{} \ensuremath{\Conid{Char}} \rulerChngEndMark{} \ensuremath{\leq } \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\anonymous } \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathcal{C}} \rulerChngEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{char}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerSameBegMark{} \ensuremath{\Conid{Char}} \rulerSameEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathcal{C}\;\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I2.expr.hm.e.var}{%
\rulerRule{e.var}{I2}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{i}\mapsto \sigma \in \Gamma } \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{o_{str}} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\leq } } \ensuremath{} \rulerChngBegMark{} \ensuremath{\sigma } \rulerChngEndMark{} \ensuremath{\leq } \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\anonymous } \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathcal{C}} \rulerChngEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Gamma } \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{i}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerSameBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathcal{C}\;\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I2.expr.hm.e.app}{%
\rulerRule{e.app}{I2}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{v}} \;\mbox{fresh} \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma ;{\cdot}\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{f}\mathbin{:}\tau } _{ \ensuremath{\Varid{f}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{f}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{f}} } \ensuremath{;\Gamma ;{\cdot}\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{a}\mathbin{:}\tau } _{ \ensuremath{\Varid{a}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma ;\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{f}\;\Varid{a}\mathbin{:}\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I2.expr.hm.e.lam}{%
\rulerRule{e.lam}{I2}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{v}} \;\mbox{fresh} \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;(\allowforspacecorrection \Varid{i}\mapsto \Varid{v}),\Gamma ;{\cdot}\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{b}\mathbin{:}\tau } _{ \ensuremath{\Varid{b}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma ;\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\lambda \Varid{i}\to \Varid{b}\mathbin{:}\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I2.expr.hm.e.let}{%
\rulerRule{e.let}{I2}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{v}} \;\mbox{fresh} \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;(\allowforspacecorrection \Varid{i}\mapsto \Varid{v}),\Gamma ;{\cdot}\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{e}\mathbin{:}\tau } _{ \ensuremath{\Varid{e}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerSameBegMark{} \ensuremath{\sigma } _{ \ensuremath{\Varid{e}} } \ensuremath{\mathrel{=}{\forall}\;(\allowforspacecorrection \Varid{ftv}\;(\allowforspacecorrection \mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{v}){\backslash}\Varid{ftv}\;(\allowforspacecorrection \mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{\Gamma )).\mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{v}} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerSameBegMark{} \ensuremath{(\allowforspacecorrection \Varid{v}\mapsto \sigma } _{ \ensuremath{\Varid{e}} } \ensuremath{)\;\mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{;(\allowforspacecorrection \Varid{i}\mapsto \Varid{v}),\Gamma ;{\cdot}\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{b}\mathbin{:}\tau } _{ \ensuremath{\Varid{b}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma ;\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\mathbf{let}\;\Varid{i}\mathrel{=}\Varid{e}\;\mathbf{in}\;\Varid{b}\mathbin{:}\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I2.expr.hm.e.tlet}{%
\rulerRule{e.tlet}{I2}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{v}} \;\mbox{fresh} \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerSameBegMark{} \ensuremath{[\mskip1.5mu\allowforspacecorrection \mskip1.5mu]\vdash } ^{ \ensuremath{\Varid{te}} } \ensuremath{\Varid{te}\mathbin{:}\sigma } \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;(\allowforspacecorrection \Varid{i}\mapsto \Varid{v}),\Gamma ;{\cdot}\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{e}\mathbin{:}\tau } _{ \ensuremath{\Varid{e}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{;(\allowforspacecorrection \Varid{i}\mapsto \Varid{v}),\Gamma ;{\cdot}\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{b}\mathbin{:}\tau } _{ \ensuremath{\Varid{b}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma ;\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\mathbf{let}\;\Varid{i}\mathbin{::}\Varid{te}\mathrel{=}\Varid{e}\;\mathbf{in}\;\Varid{b}\mathbin{:}\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.HM.expr.hm}{%
\begin{rulerRulesetFigure}{\rulerCmdUse{infer2pass.HM.expr.hm.scheme}}{Expression type rules for Hindley-Milner}{infer2pass.HM.expr.hm}{HM}
\rulerCmdUse{infer2pass.HM.expr.hm.e.int}
\hspace{1ex}
\rulerCmdUse{infer2pass.HM.expr.hm.e.var}
\hspace{1ex}
\rulerCmdUse{infer2pass.HM.expr.hm.e.app}
\hspace{1ex}
\rulerCmdUse{infer2pass.HM.expr.hm.e.lam}
\hspace{1ex}
\rulerCmdUse{infer2pass.HM.expr.hm.e.let}
\end{rulerRulesetFigure}
}
\rulerCmdDef{infer2pass.I1.expr.hm}{%
\begin{rulerRulesetFigure}{\rulerCmdUse{infer2pass.I1.expr.hm.scheme}}{Expression type rules for Hindley-Milner}{infer2pass.I1.expr.hm}{I1}
\rulerCmdUse{infer2pass.I1.expr.hm.e.int}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.expr.hm.e.char}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.expr.hm.e.var}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.expr.hm.e.app}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.expr.hm.e.lam}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.expr.hm.e.let}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.expr.hm.e.tlet}
\end{rulerRulesetFigure}
}
\rulerCmdDef{infer2pass.I2.expr.hm}{%
\begin{rulerRulesetFigure}{\rulerCmdUse{infer2pass.I2.expr.hm.scheme}}{Expression type rules for Hindley-Milner}{infer2pass.I2.expr.hm}{I2}
\rulerCmdUse{infer2pass.I2.expr.hm.e.int}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.expr.hm.e.char}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.expr.hm.e.var}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.expr.hm.e.app}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.expr.hm.e.lam}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.expr.hm.e.let}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.expr.hm.e.tlet}
\end{rulerRulesetFigure}
}

\rulerCmdDef{infer2pass.I1.expr.kn.scheme}{%
\ensuremath{\ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{e}\leadsto \mathbb{C}} }
}
\rulerCmdDef{infer2pass.I1.expr.kn.e.int}{%
\rulerRule{e.int}{I1}
{%
\ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash \Conid{Int}\leq \sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\leadsto \mathcal{C}} 
}
{%
\ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{int}\leadsto \mathcal{C}\;\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I1.expr.kn.e.char}{%
\rulerRule{e.char}{I1}
{%
\ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash \Conid{Char}\leq \sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\leadsto \mathcal{C}} 
}
{%
\ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{char}\leadsto \mathcal{C}\;\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I1.expr.kn.e.var}{%
\rulerRule{e.var}{I1}
{%
\ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash \sigma \leq \sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\leadsto \mathcal{C}} 
}
{%
\ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{i}\leadsto \mathcal{C}\;\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I1.expr.kn.e.app}{%
\rulerRule{e.app}{I1}
{%
\ensuremath{\Varid{v},\Varid{v}} _{ \ensuremath{\Varid{a}} } \ensuremath{} \;\mbox{fresh} \ensuremath{} 
\\
\ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Varid{v}} _{ \ensuremath{\Varid{a}} } \ensuremath{\to \sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{f}\leadsto \mathbb{C}} _{ \ensuremath{\Varid{f}} } \ensuremath{} 
\\
\ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{f}} } \ensuremath{;\Varid{v}} _{ \ensuremath{\Varid{a}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{a}\leadsto \mathbb{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{} 
}
{%
\ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{f}\;\Varid{a}\leadsto \mathbb{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I1.expr.kn.e.lam}{%
\rulerRule{e.lam}{I1}
{%
\ensuremath{\Varid{v},\Varid{v}} _{ \ensuremath{\Varid{r}} } \ensuremath{} \;\mbox{fresh} \ensuremath{} 
\\
\ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash \Varid{v}\to \Varid{v}} _{ \ensuremath{\Varid{r}} } \ensuremath{\leq \sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\leadsto \mathcal{C}} 
\\
\ensuremath{\mathcal{C}\;\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Varid{v}} _{ \ensuremath{\Varid{r}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{b}\leadsto \mathbb{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} 
}
{%
\ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\lambda \Varid{i}\to \Varid{b}\leadsto \mathbb{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I1.expr.kn.e.let}{%
\rulerRule{e.let}{I1}
{%
\ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Varid{v}\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{e}\leadsto \mathbb{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{} 
\\
\ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{;\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{b}\leadsto \mathbb{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} 
}
{%
\ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\mathbf{let}\;\Varid{i}\mathrel{=}\Varid{e}\;\mathbf{in}\;\Varid{b}\leadsto \mathbb{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I1.expr.kn.e.tlet}{%
\rulerRule{e.tlet}{I1}
{%
\ensuremath{(\allowforspacecorrection \Varid{v}\mapsto \sigma )\;\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\sigma \vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{e}\leadsto \mathbb{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{} 
\\
\ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{;\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{b}\leadsto \mathbb{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} 
}
{%
\ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\mathbf{let}\;\Varid{i}\mathbin{::}\Varid{te}\mathrel{=}\Varid{e}\;\mathbf{in}\;\Varid{b}\leadsto \mathbb{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I2.expr.kn.scheme}{%
\ensuremath{\ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{e}\mathbin{:}\mathbb{\bbsigma}\leadsto \mathbb{C}} }
}
\rulerCmdDef{infer2pass.I2.expr.kn.e.int}{%
\rulerRule{e.int}{I2}
{%
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{int}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\Conid{Int}} \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I2.expr.kn.e.char}{%
\rulerRule{e.char}{I2}
{%
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{char}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\Conid{Char}} \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I2.expr.kn.e.var}{%
\rulerRule{e.var}{I2}
{%
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{i}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\sigma } \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I2.expr.kn.e.app}{%
\rulerRule{e.app}{I2}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{v},\Varid{v}} _{ \ensuremath{\Varid{a}} } \ensuremath{} \;\mbox{fresh} \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Varid{v}} _{ \ensuremath{\Varid{a}} } \ensuremath{\to \sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{f}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\mathbb{\bbsigma}} _{ \ensuremath{\Varid{f}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leadsto } \rulerSameBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{f}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{\textit{fi}_{alt}^{+},o_{str}} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{f}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\leq } } \ensuremath{} \rulerChngBegMark{} \ensuremath{\mathbb{\bbsigma}} _{ \ensuremath{\Varid{f}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leq } \rulerChngBegMark{} \ensuremath{\Varid{v}} _{ \ensuremath{\Varid{a}} } \ensuremath{\to \sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\anonymous } \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Conid{F}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Conid{F}} } \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{f}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Varid{v}} _{ \ensuremath{\Varid{a}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{a}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\mathbb{\bbsigma}} _{ \ensuremath{\Varid{a}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leadsto } \rulerSameBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{\textit{fi}_{alt}^{+},o_{str}} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\leq } } \ensuremath{} \rulerChngBegMark{} \ensuremath{\mathbb{\bbsigma}} _{ \ensuremath{\Varid{a}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leq } \rulerChngBegMark{} \ensuremath{\Varid{v}} _{ \ensuremath{\Varid{a}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\anonymous } \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Conid{A}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{f}\;\Varid{a}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Conid{A}} } \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I2.expr.kn.e.lam}{%
\rulerRule{e.lam}{I2}
{%
\ensuremath{} \rulerChngBegMark{} \ensuremath{} \overline{ \ensuremath{\Varid{v}} _{ \ensuremath{\Varid{g}} }} \ensuremath{} \rulerChngEndMark{} \ensuremath{\mathrel{=}\Varid{ftv}\;(\allowforspacecorrection } \rulerChngBegMark{} \ensuremath{\Gamma } \rulerChngEndMark{} \ensuremath{)} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{o_{meet}} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{} \overline{ \ensuremath{\Varid{v}} _{ \ensuremath{\Varid{g}} }} \ensuremath{} \rulerChngEndMark{} \ensuremath{} \stackrel{ \ensuremath{\varphi \;\Varid{elim}} }{ \ensuremath{\vdash } } \ensuremath{} \rulerChngBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\sigma } _{ \ensuremath{\Varid{e}} }^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\anonymous } \rulerChngEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{v},\Varid{v}} _{ \ensuremath{\Varid{r}} } \ensuremath{} \;\mbox{fresh} \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{o_{str}} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\leq } } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{v}\to \Varid{v}} _{ \ensuremath{\Varid{r}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\leq } \rulerChngBegMark{} \ensuremath{\sigma } _{ \ensuremath{\Varid{e}} }^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\sigma } _{ \ensuremath{\Conid{F}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Conid{F}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Conid{F}} } \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Varid{v}} _{ \ensuremath{\Varid{r}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{b}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\mathbb{\bbsigma}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leadsto } \rulerSameBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{o_{meet}} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{} \overline{ \ensuremath{\Varid{v}} _{ \ensuremath{\Varid{g}} }} \ensuremath{} \rulerChngEndMark{} \ensuremath{} \stackrel{ \ensuremath{\varphi \;\Varid{elim}} }{ \ensuremath{\vdash } } \ensuremath{} \rulerChngBegMark{} \ensuremath{\Varid{v}} \rulerChngEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\anonymous } \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Conid{A}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\lambda \Varid{i}\to \Varid{b}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\Varid{v}\to \mathbb{\bbsigma}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Conid{A}} } \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I2.expr.kn.e.let}{%
\rulerRule{e.let}{I2}
{%
\ensuremath{} \rulerChngBegMark{} \ensuremath{} \overline{ \ensuremath{\Varid{v}} _{ \ensuremath{\Varid{g}} }} \ensuremath{} \rulerChngEndMark{} \ensuremath{\mathrel{=}\Varid{ftv}\;(\allowforspacecorrection } \rulerChngBegMark{} \ensuremath{\Gamma } \rulerChngEndMark{} \ensuremath{)} 
\\
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\Varid{v}} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{e}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\mathbb{\bbsigma}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leadsto } \rulerSameBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{o_{join}} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{} \overline{ \ensuremath{\Varid{v}} _{ \ensuremath{\Varid{g}} }} \ensuremath{} \rulerChngEndMark{} \ensuremath{} \stackrel{ \ensuremath{\varphi \;\Varid{elim}} }{ \ensuremath{\vdash } } \ensuremath{} \rulerChngBegMark{} \ensuremath{\mathbb{\bbsigma}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\anonymous } \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Conid{E}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Conid{E}} } \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{b}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\mathbb{\bbsigma}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leadsto } \rulerSameBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\mathbf{let}\;\Varid{i}\mathrel{=}\Varid{e}\;\mathbf{in}\;\Varid{b}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\mathbb{\bbsigma}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leadsto } \rulerSameBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I2.expr.kn.e.tlet}{%
\rulerRule{e.tlet}{I2}
{%
\ensuremath{} \rulerChngBegMark{} \ensuremath{} \overline{ \ensuremath{\Varid{v}} _{ \ensuremath{\Varid{g}} }} \ensuremath{} \rulerChngEndMark{} \ensuremath{\mathrel{=}\Varid{ftv}\;(\allowforspacecorrection } \rulerChngBegMark{} \ensuremath{\Gamma } \rulerChngEndMark{} \ensuremath{)} 
\\
\ensuremath{} \rulerSameBegMark{} \ensuremath{(\allowforspacecorrection \Varid{v}\mapsto \sigma )\;\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\sigma } \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{e}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\mathbb{\bbsigma}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leadsto } \rulerSameBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{o_{join}} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerChngBegMark{} \ensuremath{} \overline{ \ensuremath{\Varid{v}} _{ \ensuremath{\Varid{g}} }} \ensuremath{} \rulerChngEndMark{} \ensuremath{} \stackrel{ \ensuremath{\varphi \;\Varid{elim}} }{ \ensuremath{\vdash } } \ensuremath{} \rulerChngBegMark{} \ensuremath{\mathbb{\bbsigma}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\anonymous } \rulerChngEndMark{} \ensuremath{\leadsto } \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Conid{E}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerChngBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Conid{E}} } \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{b}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\mathbb{\bbsigma}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leadsto } \rulerSameBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{;} \rulerSameBegMark{} \ensuremath{\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{} \rulerSameBegMark{} \ensuremath{\mathbf{let}\;\Varid{i}\mathbin{::}\Varid{te}\mathrel{=}\Varid{e}\;\mathbf{in}\;\Varid{b}} \rulerSameEndMark{} \ensuremath{\mathbin{:}} \rulerChngBegMark{} \ensuremath{\mathbb{\bbsigma}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerChngEndMark{} \ensuremath{\leadsto } \rulerSameBegMark{} \ensuremath{\mathbb{C}} _{ \ensuremath{\Varid{b}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I1.expr.kn}{%
\begin{rulerRulesetFigure}{\rulerCmdUse{infer2pass.I1.expr.kn.scheme}}{Expression quantifier propagation rules}{infer2pass.I1.expr.kn}{I1}
\rulerCmdUse{infer2pass.I1.expr.kn.e.int}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.expr.kn.e.char}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.expr.kn.e.var}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.expr.kn.e.app}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.expr.kn.e.lam}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.expr.kn.e.let}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.expr.kn.e.tlet}
\end{rulerRulesetFigure}
}
\rulerCmdDef{infer2pass.I2.expr.kn}{%
\begin{rulerRulesetFigure}{\rulerCmdUse{infer2pass.I2.expr.kn.scheme}}{Expression quantifier propagation rules}{infer2pass.I2.expr.kn}{I2}
\rulerCmdUse{infer2pass.I2.expr.kn.e.int}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.expr.kn.e.char}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.expr.kn.e.var}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.expr.kn.e.app}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.expr.kn.e.lam}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.expr.kn.e.let}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.expr.kn.e.tlet}
\end{rulerRulesetFigure}
}

\rulerCmdDef{infer2pass.HM.match.all.scheme}{%
\ensuremath{\ensuremath{\vdash } ^{ \ensuremath{\cong } } \ensuremath{\tau } _{ \ensuremath{\Varid{l}} } \ensuremath{\cong \tau } _{ \ensuremath{\Varid{r}} } \ensuremath{\leadsto \mathcal{C}} }
}
\rulerCmdDef{infer2pass.HM.match.all.m.var}{%
\rulerRule{m.var}{HM}
{%
\ensuremath{{\nu}} _{ \ensuremath{\mathrm{1}} } \ensuremath{\mathrel{=}{\nu}} _{ \ensuremath{\mathrm{2}} } \ensuremath{} 
}
{%
\ensuremath{\vdash } ^{ \ensuremath{\cong } } \ensuremath{{\nu}} _{ \ensuremath{\mathrm{1}} } \ensuremath{\cong {\nu}} _{ \ensuremath{\mathrm{2}} } \ensuremath{\leadsto [\mskip1.5mu\allowforspacecorrection \mskip1.5mu]} 
}
}

\rulerCmdDef{infer2pass.HM.match.all.m.var.l1}{%
\rulerRule{m.var.l1}{HM}
{%
\ensuremath{\Varid{v}\notin \Varid{ftv}\;(\allowforspacecorrection \tau )} 
\\
\ensuremath{\mathcal{C}\mathrel{=}[\mskip1.5mu\allowforspacecorrection \Varid{v}\mapsto \tau \mskip1.5mu]} 
}
{%
\ensuremath{\vdash } ^{ \ensuremath{\cong } } \ensuremath{\Varid{v}\cong \tau \leadsto \mathcal{C}} 
}
}

\rulerCmdDef{infer2pass.HM.match.all.m.var.r1}{%
\rulerRule{m.var.r1}{HM}
{%
\ensuremath{\Varid{v}\notin \Varid{ftv}\;(\allowforspacecorrection \tau )} 
\\
\ensuremath{\mathcal{C}\mathrel{=}[\mskip1.5mu\allowforspacecorrection \Varid{v}\mapsto \tau \mskip1.5mu]} 
}
{%
\ensuremath{\vdash } ^{ \ensuremath{\cong } } \ensuremath{\tau \cong \Varid{v}\leadsto \mathcal{C}} 
}
}

\rulerCmdDef{infer2pass.HM.match.all.m.arrow}{%
\rulerRule{m.arrow}{HM}
{%
\ensuremath{\vdash } ^{ \ensuremath{\cong } } \ensuremath{\tau } _{ \ensuremath{\mathrm{2}} }^{ \ensuremath{\Varid{a}} } \ensuremath{\cong \tau } _{ \ensuremath{\mathrm{1}} }^{ \ensuremath{\Varid{a}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{} 
\\
\ensuremath{\vdash } ^{ \ensuremath{\cong } } \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{\tau } _{ \ensuremath{\mathrm{1}} }^{ \ensuremath{\Varid{r}} } \ensuremath{\cong \mathcal{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{\tau } _{ \ensuremath{\mathrm{2}} }^{ \ensuremath{\Varid{r}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{r}} } \ensuremath{} 
}
{%
\ensuremath{\vdash } ^{ \ensuremath{\cong } } \ensuremath{\tau } _{ \ensuremath{\mathrm{1}} }^{ \ensuremath{\Varid{a}} } \ensuremath{\to \tau } _{ \ensuremath{\mathrm{1}} }^{ \ensuremath{\Varid{r}} } \ensuremath{\cong \tau } _{ \ensuremath{\mathrm{2}} }^{ \ensuremath{\Varid{a}} } \ensuremath{\to \tau } _{ \ensuremath{\mathrm{2}} }^{ \ensuremath{\Varid{r}} } \ensuremath{\leadsto \mathcal{C}} _{ \ensuremath{\Varid{r}} } \ensuremath{\mathcal{C}} _{ \ensuremath{\Varid{a}} } \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.HM.match.all}{%
\begin{rulerRulesetFigure}{\rulerCmdUse{infer2pass.HM.match.all.scheme}}{Type matching rules}{infer2pass.HM.match.all}{HM}
\rulerCmdUse{infer2pass.HM.match.all.m.var}
\hspace{1ex}
\rulerCmdUse{infer2pass.HM.match.all.m.var.l1}
\hspace{1ex}
\rulerCmdUse{infer2pass.HM.match.all.m.var.r1}
\hspace{1ex}
\rulerCmdUse{infer2pass.HM.match.all.m.arrow}
\end{rulerRulesetFigure}
}

\rulerCmdDef{infer2pass.I1.tyexpr.base.scheme}{%
\ensuremath{\ensuremath{\Conid{Delta}\vdash } ^{ \ensuremath{\Varid{te}} } \ensuremath{\Varid{te}\mathbin{:}\tau } }
}
\rulerCmdDef{infer2pass.I1.tyexpr.base.te.int}{%
\rulerRule{te.int}{I1}
{%
}
{%
\ensuremath{\Conid{Delta}\vdash } ^{ \ensuremath{\Varid{te}} } \ensuremath{\Varid{int}\mathbin{:}\Conid{Int}} 
}
}

\rulerCmdDef{infer2pass.I1.tyexpr.base.te.char}{%
\rulerRule{te.char}{I1}
{%
}
{%
\ensuremath{\Conid{Delta}\vdash } ^{ \ensuremath{\Varid{te}} } \ensuremath{\Varid{char}\mathbin{:}\Conid{Char}} 
}
}

\rulerCmdDef{infer2pass.I1.tyexpr.base.te.var}{%
\rulerRule{te.var}{I1}
{%
\ensuremath{\Varid{i}\mapsto \tau \in \Conid{Delta}} 
}
{%
\ensuremath{\Conid{Delta}\vdash } ^{ \ensuremath{\Varid{te}} } \ensuremath{\Varid{i}\mathbin{:}\tau } 
}
}

\rulerCmdDef{infer2pass.I1.tyexpr.base.te.all}{%
\rulerRule{te.all}{I1}
{%
\ensuremath{\Varid{v}} \;\mbox{fresh} \ensuremath{} 
\\
\ensuremath{(\allowforspacecorrection \Varid{i}\mapsto \Varid{v}),\Conid{Delta}\vdash } ^{ \ensuremath{\Varid{te}} } \ensuremath{\Varid{te}\mathbin{:}\sigma } 
}
{%
\ensuremath{\Conid{Delta}\vdash } ^{ \ensuremath{\Varid{te}} } \ensuremath{{\forall}\;\Varid{i}.\Varid{te}\mathbin{:}{\forall}\;\Varid{v}.\sigma } 
}
}

\rulerCmdDef{infer2pass.I1.tyexpr.base.te.arr}{%
\rulerRule{te.arr}{I1}
{%
\ensuremath{\Conid{Delta}\vdash } ^{ \ensuremath{\Varid{te}} } \ensuremath{\Varid{r}\mathbin{:}\sigma } _{ \ensuremath{\Varid{r}} } \ensuremath{} 
\\
\ensuremath{\Conid{Delta}\vdash } ^{ \ensuremath{\Varid{te}} } \ensuremath{\Varid{a}\mathbin{:}\sigma } _{ \ensuremath{\Varid{a}} } \ensuremath{} 
}
{%
\ensuremath{\Conid{Delta}\vdash } ^{ \ensuremath{\Varid{te}} } \ensuremath{\Varid{a}\to \Varid{r}\mathbin{:}\sigma } _{ \ensuremath{\Varid{a}} } \ensuremath{\to \sigma } _{ \ensuremath{\Varid{r}} } \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I2.tyexpr.base.scheme}{%
\ensuremath{\ensuremath{\Conid{Delta}\vdash } ^{ \ensuremath{\Varid{te}} } \ensuremath{\Varid{te}\mathbin{:}\tau } }
}
\rulerCmdDef{infer2pass.I2.tyexpr.base.te.int}{%
\rulerRule{te.int}{I2}
{%
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\Conid{Delta}\vdash } ^{ \ensuremath{\Varid{te}} } \ensuremath{\Varid{int}\mathbin{:}\Conid{Int}} \rulerSameEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I2.tyexpr.base.te.char}{%
\rulerRule{te.char}{I2}
{%
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\Conid{Delta}\vdash } ^{ \ensuremath{\Varid{te}} } \ensuremath{\Varid{char}\mathbin{:}\Conid{Char}} \rulerSameEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I2.tyexpr.base.te.var}{%
\rulerRule{te.var}{I2}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{i}\mapsto \tau \in \Conid{Delta}} \rulerSameEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\Conid{Delta}\vdash } ^{ \ensuremath{\Varid{te}} } \ensuremath{\Varid{i}\mathbin{:}\tau } \rulerSameEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I2.tyexpr.base.te.all}{%
\rulerRule{te.all}{I2}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\Varid{v}} \;\mbox{fresh} \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerSameBegMark{} \ensuremath{(\allowforspacecorrection \Varid{i}\mapsto \Varid{v}),\Conid{Delta}\vdash } ^{ \ensuremath{\Varid{te}} } \ensuremath{\Varid{te}\mathbin{:}\sigma } \rulerSameEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\Conid{Delta}\vdash } ^{ \ensuremath{\Varid{te}} } \ensuremath{{\forall}\;\Varid{i}.\Varid{te}\mathbin{:}{\forall}\;\Varid{v}.\sigma } \rulerSameEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I2.tyexpr.base.te.arr}{%
\rulerRule{te.arr}{I2}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\Conid{Delta}\vdash } ^{ \ensuremath{\Varid{te}} } \ensuremath{\Varid{r}\mathbin{:}\sigma } _{ \ensuremath{\Varid{r}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
\\
\ensuremath{} \rulerSameBegMark{} \ensuremath{\Conid{Delta}\vdash } ^{ \ensuremath{\Varid{te}} } \ensuremath{\Varid{a}\mathbin{:}\sigma } _{ \ensuremath{\Varid{a}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
{%
\ensuremath{} \rulerSameBegMark{} \ensuremath{\Conid{Delta}\vdash } ^{ \ensuremath{\Varid{te}} } \ensuremath{\Varid{a}\to \Varid{r}\mathbin{:}\sigma } _{ \ensuremath{\Varid{a}} } \ensuremath{\to \sigma } _{ \ensuremath{\Varid{r}} } \ensuremath{} \rulerSameEndMark{} \ensuremath{} 
}
}

\rulerCmdDef{infer2pass.I1.tyexpr.base}{%
\begin{rulerRulesetFigure}{\rulerCmdUse{infer2pass.I1.tyexpr.base.scheme}}{Typr expression type rules}{infer2pass.I1.tyexpr.base}{I1}
\rulerCmdUse{infer2pass.I1.tyexpr.base.te.int}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.tyexpr.base.te.char}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.tyexpr.base.te.var}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.tyexpr.base.te.all}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.tyexpr.base.te.arr}
\end{rulerRulesetFigure}
}
\rulerCmdDef{infer2pass.I2.tyexpr.base}{%
\begin{rulerRulesetFigure}{\rulerCmdUse{infer2pass.I2.tyexpr.base.scheme}}{Typr expression type rules}{infer2pass.I2.tyexpr.base}{I2}
\rulerCmdUse{infer2pass.I2.tyexpr.base.te.int}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.tyexpr.base.te.char}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.tyexpr.base.te.var}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.tyexpr.base.te.all}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.tyexpr.base.te.arr}
\end{rulerRulesetFigure}
}

\rulerCmdDef{infer2pass.I2.expr.forPaper.scheme}{%
\ensuremath{\ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma ;\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{e}\mathbin{:}\mathbb{\bbsigma};\tau \leadsto \mathbb{C};\mathcal{C}} }
}
\rulerCmdDef{infer2pass.I2.expr.forPaper.e.int}{%
\rulerCmdUse{infer2pass.I2.expr.base.e.int}
}

\rulerCmdDef{infer2pass.I2.expr.forPaper.e.var}{%
\rulerCmdUse{infer2pass.I2.expr.base.e.var}
}

\rulerCmdDef{infer2pass.I2.expr.forPaper.e.app}{%
\rulerCmdUse{infer2pass.I2.expr.base.e.app}
}

\rulerCmdDef{infer2pass.I2.expr.forPaper.e.lam}{%
\rulerCmdUse{infer2pass.I2.expr.base.e.lam}
}

\rulerCmdDef{infer2pass.I2.expr.forPaper.e.let}{%
\rulerCmdUse{infer2pass.I2.expr.base.e.let}
}

\rulerCmdDef{infer2pass.I2.expr.forPaper.e.tlet}{%
\rulerCmdUse{infer2pass.I2.expr.base.e.tlet}
}

\rulerCmdDef{infer2pass.I1.expr.forPaper.scheme}{%
\ensuremath{\ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma ;\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{e}\mathbin{:}\tau \leadsto \mathbb{C};\mathcal{C}} }
}
\rulerCmdDef{infer2pass.I1.expr.forPaper.e.int}{%
\rulerCmdUse{infer2pass.I1.expr.base.e.int}
}

\rulerCmdDef{infer2pass.I1.expr.forPaper.e.var}{%
\rulerCmdUse{infer2pass.I1.expr.base.e.var}
}

\rulerCmdDef{infer2pass.I1.expr.forPaper.e.app}{%
\rulerCmdUse{infer2pass.I1.expr.base.e.app}
}

\rulerCmdDef{infer2pass.I1.expr.forPaper.e.lam}{%
\rulerCmdUse{infer2pass.I1.expr.base.e.lam}
}

\rulerCmdDef{infer2pass.I1.expr.forPaper.e.let}{%
\rulerCmdUse{infer2pass.I1.expr.base.e.let}
}

\rulerCmdDef{infer2pass.I1.expr.forPaper.e.tlet}{%
\rulerCmdUse{infer2pass.I1.expr.base.e.tlet}
}

\rulerCmdDef{infer2pass.HM.expr.forPaper.scheme}{%
\ensuremath{\ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma \vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{e}\mathbin{:}\tau \leadsto \mathcal{C}} }
}
\rulerCmdDef{infer2pass.HM.expr.forPaper.e.int}{%
\rulerCmdUse{infer2pass.HM.expr.base.e.int}
}

\rulerCmdDef{infer2pass.HM.expr.forPaper.e.var}{%
\rulerCmdUse{infer2pass.HM.expr.base.e.var}
}

\rulerCmdDef{infer2pass.HM.expr.forPaper.e.app}{%
\rulerCmdUse{infer2pass.HM.expr.base.e.app}
}

\rulerCmdDef{infer2pass.HM.expr.forPaper.e.lam}{%
\rulerCmdUse{infer2pass.HM.expr.base.e.lam}
}

\rulerCmdDef{infer2pass.HM.expr.forPaper.e.let}{%
\rulerCmdUse{infer2pass.HM.expr.base.e.let}
}

\rulerCmdDef{infer2pass.I2.expr.forPaper}{%
\begin{rulerRulesetFigure}{\rulerCmdUse{infer2pass.I2.expr.forPaper.scheme}}{Expression type rules}{infer2pass.I2.expr.forPaper}{I2}
\rulerCmdUse{infer2pass.I2.expr.forPaper.e.int}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.expr.forPaper.e.var}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.expr.forPaper.e.app}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.expr.forPaper.e.lam}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.expr.forPaper.e.let}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.expr.forPaper.e.tlet}
\end{rulerRulesetFigure}
}
\rulerCmdDef{infer2pass.I1.expr.forPaper}{%
\begin{rulerRulesetFigure}{\rulerCmdUse{infer2pass.I1.expr.forPaper.scheme}}{Expression type rules}{infer2pass.I1.expr.forPaper}{I1}
\rulerCmdUse{infer2pass.I1.expr.forPaper.e.int}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.expr.forPaper.e.var}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.expr.forPaper.e.app}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.expr.forPaper.e.lam}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.expr.forPaper.e.let}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.expr.forPaper.e.tlet}
\end{rulerRulesetFigure}
}
\rulerCmdDef{infer2pass.HM.expr.forPaper}{%
\begin{rulerRulesetFigure}{\rulerCmdUse{infer2pass.HM.expr.forPaper.scheme}}{Expression type rules}{infer2pass.HM.expr.forPaper}{HM}
\rulerCmdUse{infer2pass.HM.expr.forPaper.e.int}
\hspace{1ex}
\rulerCmdUse{infer2pass.HM.expr.forPaper.e.var}
\hspace{1ex}
\rulerCmdUse{infer2pass.HM.expr.forPaper.e.app}
\hspace{1ex}
\rulerCmdUse{infer2pass.HM.expr.forPaper.e.lam}
\hspace{1ex}
\rulerCmdUse{infer2pass.HM.expr.forPaper.e.let}
\end{rulerRulesetFigure}
}

\rulerCmdDef{infer2pass.I2.match.baseForImpredPaper.scheme}{%
\ensuremath{\ensuremath{o;\mathbb{C}\vdash } ^{ \ensuremath{\cong } } \ensuremath{\tau } _{ \ensuremath{\Varid{l}} } \ensuremath{\cong \tau } _{ \ensuremath{\Varid{r}} } \ensuremath{\mathbin{:}\tau } _{ \ensuremath{\Varid{f}} } \ensuremath{\leadsto \mathcal{C}} }
}
\rulerCmdDef{infer2pass.I1.match.baseForImpredPaper.scheme}{%
\ensuremath{\ensuremath{\vdash } ^{ \ensuremath{\cong } } \ensuremath{\tau } _{ \ensuremath{\Varid{l}} } \ensuremath{\cong \tau } _{ \ensuremath{\Varid{r}} } \ensuremath{\leadsto \mathcal{C}} }
}
\rulerCmdDef{infer2pass.HM.match.baseForImpredPaper.scheme}{%
\ensuremath{\ensuremath{\vdash } ^{ \ensuremath{\cong } } \ensuremath{\tau } _{ \ensuremath{\Varid{l}} } \ensuremath{\cong \tau } _{ \ensuremath{\Varid{r}} } \ensuremath{\leadsto \mathcal{C}} }
}
\rulerCmdDef{infer2pass.HM.match.baseForImpredPaper.m.var}{%
\rulerCmdUse{infer2pass.HM.match.all.m.var}
}

\rulerCmdDef{infer2pass.HM.match.baseForImpredPaper.m.var.l1}{%
\rulerCmdUse{infer2pass.HM.match.all.m.var.l1}
}

\rulerCmdDef{infer2pass.HM.match.baseForImpredPaper.m.var.r1}{%
\rulerCmdUse{infer2pass.HM.match.all.m.var.r1}
}

\rulerCmdDef{infer2pass.HM.match.baseForImpredPaper.m.arrow}{%
\rulerCmdUse{infer2pass.HM.match.all.m.arrow}
}

\rulerCmdDef{infer2pass.I2.match.baseForImpredPaper}{%
\begin{rulerRulesetFigure}{\rulerCmdUse{infer2pass.I2.match.baseForImpredPaper.scheme}}{Type matching \ensuremath{\cong }}{infer2pass.I2.match.baseForImpredPaper}{I2}
\end{rulerRulesetFigure}
}
\rulerCmdDef{infer2pass.I1.match.baseForImpredPaper}{%
\begin{rulerRulesetFigure}{\rulerCmdUse{infer2pass.I1.match.baseForImpredPaper.scheme}}{Type matching \ensuremath{\cong }}{infer2pass.I1.match.baseForImpredPaper}{I1}
\end{rulerRulesetFigure}
}
\rulerCmdDef{infer2pass.HM.match.baseForImpredPaper}{%
\begin{rulerRulesetFigure}{\rulerCmdUse{infer2pass.HM.match.baseForImpredPaper.scheme}}{Type matching \ensuremath{\cong }}{infer2pass.HM.match.baseForImpredPaper}{HM}
\rulerCmdUse{infer2pass.HM.match.baseForImpredPaper.m.var}
\hspace{1ex}
\rulerCmdUse{infer2pass.HM.match.baseForImpredPaper.m.var.l1}
\hspace{1ex}
\rulerCmdUse{infer2pass.HM.match.baseForImpredPaper.m.var.r1}
\hspace{1ex}
\rulerCmdUse{infer2pass.HM.match.baseForImpredPaper.m.arrow}
\end{rulerRulesetFigure}
}

\rulerCmdDef{infer2pass.I2.expr.kn.forPaper.scheme}{%
\ensuremath{\ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma ;\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{e}\mathbin{:}\mathbb{\bbsigma};\tau \leadsto \mathbb{C};\mathcal{C}} }
}
\rulerCmdDef{infer2pass.I2.expr.kn.forPaper.e.int}{%
\rulerCmdUse{infer2pass.I2.expr.kn.e.int}
}

\rulerCmdDef{infer2pass.I2.expr.kn.forPaper.e.var}{%
\rulerCmdUse{infer2pass.I2.expr.kn.e.var}
}

\rulerCmdDef{infer2pass.I2.expr.kn.forPaper.e.app}{%
\rulerCmdUse{infer2pass.I2.expr.kn.e.app}
}

\rulerCmdDef{infer2pass.I2.expr.kn.forPaper.e.lam}{%
\rulerCmdUse{infer2pass.I2.expr.kn.e.lam}
}

\rulerCmdDef{infer2pass.I2.expr.kn.forPaper.e.let}{%
\rulerCmdUse{infer2pass.I2.expr.kn.e.let}
}

\rulerCmdDef{infer2pass.I1.expr.kn.forPaper.scheme}{%
\ensuremath{\ensuremath{\mathbb{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma ;\sigma } ^{ \ensuremath{\Varid{k}} } \ensuremath{\vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{e}\mathbin{:}\tau \leadsto \mathbb{C};\mathcal{C}} }
}
\rulerCmdDef{infer2pass.I1.expr.kn.forPaper.e.int}{%
\rulerCmdUse{infer2pass.I1.expr.kn.e.int}
}

\rulerCmdDef{infer2pass.I1.expr.kn.forPaper.e.var}{%
\rulerCmdUse{infer2pass.I1.expr.kn.e.var}
}

\rulerCmdDef{infer2pass.I1.expr.kn.forPaper.e.app}{%
\rulerCmdUse{infer2pass.I1.expr.kn.e.app}
}

\rulerCmdDef{infer2pass.I1.expr.kn.forPaper.e.lam}{%
\rulerCmdUse{infer2pass.I1.expr.kn.e.lam}
}

\rulerCmdDef{infer2pass.I1.expr.kn.forPaper.e.let}{%
\rulerCmdUse{infer2pass.I1.expr.kn.e.let}
}

\rulerCmdDef{infer2pass.HM.expr.kn.forPaper.scheme}{%
\ensuremath{\ensuremath{\mathcal{C}} ^{ \ensuremath{\Varid{k}} } \ensuremath{;\Gamma \vdash } ^{ \ensuremath{\Varid{e}} } \ensuremath{\Varid{e}\mathbin{:}\tau \leadsto \mathcal{C}} }
}
\rulerCmdDef{infer2pass.I2.expr.kn.forPaper}{%
\begin{rulerRulesetFigure}{\rulerCmdUse{infer2pass.I2.expr.kn.forPaper.scheme}}{Expression quantifier propagation rules}{infer2pass.I2.expr.kn.forPaper}{I2}
\rulerCmdUse{infer2pass.I2.expr.kn.forPaper.e.int}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.expr.kn.forPaper.e.var}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.expr.kn.forPaper.e.app}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.expr.kn.forPaper.e.lam}
\hspace{1ex}
\rulerCmdUse{infer2pass.I2.expr.kn.forPaper.e.let}
\end{rulerRulesetFigure}
}
\rulerCmdDef{infer2pass.I1.expr.kn.forPaper}{%
\begin{rulerRulesetFigure}{\rulerCmdUse{infer2pass.I1.expr.kn.forPaper.scheme}}{Expression quantifier propagation rules}{infer2pass.I1.expr.kn.forPaper}{I1}
\rulerCmdUse{infer2pass.I1.expr.kn.forPaper.e.int}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.expr.kn.forPaper.e.var}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.expr.kn.forPaper.e.app}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.expr.kn.forPaper.e.lam}
\hspace{1ex}
\rulerCmdUse{infer2pass.I1.expr.kn.forPaper.e.let}
\end{rulerRulesetFigure}
}
\rulerCmdDef{infer2pass.HM.expr.kn.forPaper}{%
\begin{rulerRulesetFigure}{\rulerCmdUse{infer2pass.HM.expr.kn.forPaper.scheme}}{Expression quantifier propagation rules}{infer2pass.HM.expr.kn.forPaper}{HM}
\end{rulerRulesetFigure}
}

